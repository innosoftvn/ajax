
(function(c){var b={};function e(g,f){for(var h in f){g[h]=g[h]||f[h]}}function a(f,h){var g=[];h=h||"";if(Object.prototype.toString.call(f)=="[object Array]"){f.forEach(function(k,j){a(k,h+"["+j+"]").forEach(function(l){g.push(l)})})}else{if(Object.prototype.toString.call(f)=="[object Object]"){for(var i in f){a(f[i],h==""?i:h+"["+i+"]").forEach(function(j){g.push(j)})}}else{g.push([h,encodeURIComponent(f)].join("="))}}return g}function d(h,k,j,i,g){var f={};f.url=h;f.method=k||"POST";f.data=j||{};f.settings=i||{};f.httpRequest=g||new XMLHttpRequest();if(!f.httpRequest){console.log("Giving up :( Cannot create an XMLHTTP instance");return false}f.get=function(l){e(f.data,l);return d(f.url,"GET",f.data,f.settings,f.httpRequest)};f.post=function(l){e(f.data,l);return d(f.url,"POST",f.data,f.settings,f.httpRequest)};f.put=function(l){e(f.data,l);return d(f.url,"PUT",f.data,f.settings,f.httpRequest)};f.patch=function(l){e(f.data,l);return d(f.url,"PATCH",f.data,f.settings,f.httpRequest)};f.before=function(l){if(l.call(this)===false){e(f.settings,{abort:true})}return d(f.url,f.method,f.data,f.settings,f.httpRequest)};f.then=function(m){if(f.settings.abort&&f.settings.abort===true){return false}e(f.settings,b);f.httpRequest.onreadystatechange=function(){if(f.httpRequest.readyState===XMLHttpRequest.DONE){if(m&&typeof m=="function"){var n="info";if(f.httpRequest.status>=200){n="success"}if(f.httpRequest.status>=300){n="warning"}if(f.httpRequest.status>=400){n="danger"}m.call(this,n,f.httpRequest.response)}}};if(f.method=="GET"){f.url=[f.url,a(f.data||{}).join("&")].join("?");f.data={}}f.httpRequest.open(f.method,f.url);f.httpRequest.responseType="json";f.settings.headers=f.settings.headers||{};e(f.settings.headers,{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"});for(var l in f.settings.headers){f.httpRequest.setRequestHeader(l,f.settings.headers[l])}f.httpRequest.send(a(f.data||{}).join("&"))};return f}d.setup=function(f){e(b,f)};if(typeof exports==="object"){module.exports=d}else{if(typeof define==="function"&&define.amd){define(function(){return d})}else{c.ajax=d}}})(typeof window!="undefined"?window:undefined);