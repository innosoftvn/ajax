
(function(c){var b={},d={};function e(h,g){for(var i in g){h[i]=h[i]||g[i]}}function a(g,i){var h=[];i=i||"";if(Object.prototype.toString.call(g)=="[object Array]"){g.forEach(function(l,k){a(l,i+"["+k+"]").forEach(function(m){h.push(m)})})}else{if(Object.prototype.toString.call(g)=="[object Object]"){for(var j in g){a(g[j],i==""?j:i+"["+j+"]").forEach(function(k){h.push(k)})}}else{h.push([i,encodeURIComponent(g)].join("="))}}return h}function f(i,l,k,j,h){var g={};g.url=i||"";g.method=l||"GET";g.data=k||{};g.settings=j||{};g.httpRequest=h||new XMLHttpRequest();if(!g.httpRequest){console.log("Giving up :( Cannot create an XMLHTTP instance");return false}g.before=function(m){if(m.call(this)===false){e(g.settings,{abort:true})}return f(g.url,g.method,g.data,g.settings,g.httpRequest)};g.then=function(n){if(g.settings.abort&&g.settings.abort===true){return false}e(g.settings,b);g.httpRequest.onreadystatechange=function(){if(g.httpRequest.readyState===XMLHttpRequest.DONE){if(n&&typeof n=="function"){var q="info";if(g.httpRequest.status>=200){q="success"}if(g.httpRequest.status>=300){q="warning"}if(g.httpRequest.status>=400){q="error"}try{var o=JSON.parse(g.httpRequest.response);n.call(this,q,o)}catch(p){n.call(this,q,g.httpRequest.response)}}}};if(g.method=="GET"){g.url=[g.url,a(g.data||{}).join("&")].join("?");g.data={}}g.httpRequest.open(g.method,g.url);g.httpRequest.responseType="json";g.settings.headers=g.settings.headers||{};e(g.settings.headers,{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"});for(var m in g.settings.headers){g.httpRequest.setRequestHeader(m,g.settings.headers[m])}g.httpRequest.send(a(g.data||{}).join("&"))};return g}d.setup=function(g){e(b,g)};d.get=function(g,h){return new f(g,"GET",h)};d.post=function(g,h){return new f(g,"POST",h)};d.put=function(g,h){return new f(g,"PUT",h)};d.patch=function(g,h){return new f(g,"PATCH",h)};d["delete"]=function(g,h){return new f(g,"DELETE",h)};if(typeof exports==="object"){module.exports=d}else{if(typeof define==="function"&&define.amd){define(function(){return d})}else{c.ajax=d}}})(typeof window!="undefined"?window:undefined);