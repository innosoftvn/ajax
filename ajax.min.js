
(function(c){function b(){this.__ajaxSetup__={};this.url="";this.method="get";this.data={};this.settings={}}function e(i,h){var g={};for(var f in i){g[f]=i[f]}for(var f in h){g[f]=h[f]}return g}function a(f,h){var g=[];h=h||"";if(Object.prototype.toString.call(f)=="[object Array]"){f.forEach(function(k,j){a(k,h+"["+j+"]").forEach(function(l){g.push(l)})})}else{if(Object.prototype.toString.call(f)=="[object Object]"){for(var i in f){a(f[i],h==""?i:h+"["+i+"]").forEach(function(j){g.push(j)})}}else{g.push([h,encodeURIComponent(f)].join("="))}}return g}b.prototype.setup=function(f){this.__ajaxSetup__=e(this.__ajaxSetup__,f)};b.prototype.create=function(f,i,h,g){this.url=f||"";this.method=i||"get";this.data=h||{};this.settings=g||{}};["get","post","put","patch","delete"].forEach(function(f){b.prototype[f]=function(g,i,h){this.create(g,f,i,h);return this}});b.prototype.then=function(j){var h=new XMLHttpRequest();var f=this;if(!h){console.log("Giving up :( Cannot create an XMLHTTP instance");return false}f.settings=e(f.settings,f.__ajaxSetup__);if(f.method=="get"){f.url=[f.url,a(f.data||{}).join("&")].join("?");f.data={}}f.settings.events=f.settings.events||{};for(var g in f.settings.events){h.addEventListener(g,f.settings.events[g])}f.settings.uploadEvents=f.settings.uploadEvents||{};for(var g in f.settings.uploadEvents){h.upload.addEventListener(g,f.settings.uploadEvents[g])}h.open(f.method,f.url);h.responseType=f.settings.responseType||"json";h.onreadystatechange=function(){if(h.readyState===XMLHttpRequest.DONE){var m="info";if(h.status>=200){m="success"}if(h.status>=300){m="warning"}if(h.status>=400){m="error"}try{var k=JSON.parse(h.response);j.call(f,m,k)}catch(l){j.call(f,m,h.response)}}};f.settings.headers=f.settings.headers||{};if(f.settings.contentType!==false){f.settings.headers=e(f.settings.headers,{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"})}for(var i in f.settings.headers){h.setRequestHeader(i,f.settings.headers[i])}h.send(f.settings.contentType===false?f.data:a(f.data||{}).join("&"))};var d=new b();if(typeof exports==="object"){module.exports=d}else{if(typeof define==="function"&&define.amd){define(function(){return d})}else{c.ajax=d}}})(typeof window!="undefined"?window:undefined);